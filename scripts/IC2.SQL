/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 24-abr-2019 10:22:45 a.m. 				*/
/*  DBMS       : MySql 						*/
/* ---------------------------------------------------- */

SET FOREIGN_KEY_CHECKS=0 
;

/* Drop Tables */

DROP TABLE IF EXISTS `atributos_producto` CASCADE
;

DROP TABLE IF EXISTS `categoria` CASCADE
;

DROP TABLE IF EXISTS `grupo_investigacion` CASCADE
;

DROP TABLE IF EXISTS `integrante_grupo` CASCADE
;

DROP TABLE IF EXISTS `investigador` CASCADE
;

DROP TABLE IF EXISTS `producto` CASCADE
;

DROP TABLE IF EXISTS `producto_investigador` CASCADE
;

/* Create Tables */

CREATE TABLE `atributos_producto`
(
	`k_codigo` INT NOT NULL AUTO_INCREMENT,
	`i_codigo_producto` INT NULL,
	`n_nombre` VARCHAR(100) NULL,
	`c_valor` VARCHAR(100) NULL,
	CONSTRAINT `PK_atributos_producto` PRIMARY KEY (`k_codigo` ASC)
)

;

CREATE TABLE `categoria`
(
	`k_codigo` VARCHAR(10) NOT NULL,
	`n_nombre` VARCHAR(100) NULL,
	`c_tipo_produccion` VARCHAR(6) NULL,
	`i_ventana_observacion` INT NULL,
	`c_tipo_producto` VARCHAR(250) NULL,
	`c_area_conocimiento` VARCHAR(6) NULL,
	CONSTRAINT `PK_categoria` PRIMARY KEY (`k_codigo` ASC)
)

;

CREATE TABLE `grupo_investigacion`
(
	`k_codigo` INT NOT NULL AUTO_INCREMENT,
	`n_nombre` VARCHAR(150) NULL,
	`c_clasificacion` VARCHAR(1) NULL,
	`i_ano_creacion` INT NULL,
	`c_area_conocimiento` VARCHAR(200) NULL,
	CONSTRAINT `PK_Table1` PRIMARY KEY (`k_codigo` ASC)
)

;

CREATE TABLE `integrante_grupo`
(
	`i_codigo_grupo` INT NOT NULL AUTO_INCREMENT,
	`i_codigo_investigador` INT NOT NULL,
	`f_inicio_vinculacion` DATE NULL,
	`f_fin_vinculacion` DATE NULL,
	CONSTRAINT `PK_integrante_grupo` PRIMARY KEY (`i_codigo_grupo` ASC, `i_codigo_investigador` ASC)
)

;

CREATE TABLE `investigador`
(
	`k_codigo` INT NOT NULL AUTO_INCREMENT,
	`n_nombre` VARCHAR(50) NULL,
	CONSTRAINT `PK_investigador` PRIMARY KEY (`k_codigo` ASC)
)

;

CREATE TABLE `producto`
(
	`k_codigo` INT NOT NULL AUTO_INCREMENT,
	`i_codigo_grupo` INT NULL,
	`c_categoria` VARCHAR(10) NULL,
	`n_nombre` VARCHAR(300) NULL,
	`i_ano` INT NULL,
	`c_tipo_producto` VARCHAR(200) NULL,
	CONSTRAINT `PK_Table1` PRIMARY KEY (`k_codigo` ASC)
)

;

CREATE TABLE `producto_investigador`
(
	`i_codigo_producto` INT NOT NULL,
	`i_codigo_investigador` INT NOT NULL,
	`i_grupos_colaboracion` VARCHAR(50) NULL,
	`i_integrante_grupo` VARCHAR(50) NULL,
	CONSTRAINT `PK_producto_investigador` PRIMARY KEY (`i_codigo_producto` ASC, `i_codigo_investigador` ASC)
)

;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE `atributos_producto` 
 ADD INDEX `IXFK_atributos_producto_producto` (`i_codigo_producto` ASC)
;

ALTER TABLE `integrante_grupo` 
 ADD INDEX `IXFK_integrante_grupo_grupo_investigacion` (`i_codigo_grupo` ASC)
;

ALTER TABLE `integrante_grupo` 
 ADD INDEX `IXFK_integrante_grupo_investigador` (`i_codigo_investigador` ASC)
;

ALTER TABLE `producto` 
 ADD INDEX `IXFK_producto_categoria` (`c_categoria` ASC)
;

ALTER TABLE `producto` 
 ADD INDEX `IXFK_producto_grupo_investigacion` (`i_codigo_grupo` ASC)
;

ALTER TABLE `producto_investigador` 
 ADD INDEX `IXFK_producto_investigador_investigador` (`i_codigo_investigador` ASC)
;

ALTER TABLE `producto_investigador` 
 ADD INDEX `IXFK_producto_investigador_producto` (`i_codigo_producto` ASC)
;

/* Create Foreign Key Constraints */

ALTER TABLE `atributos_producto` 
 ADD CONSTRAINT `FK_atributos_producto_producto`
	FOREIGN KEY (`i_codigo_producto`) REFERENCES `producto` (`k_codigo`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `integrante_grupo` 
 ADD CONSTRAINT `FK_integrante_grupo_grupo_investigacion`
	FOREIGN KEY (`i_codigo_grupo`) REFERENCES `grupo_investigacion` (`k_codigo`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `integrante_grupo` 
 ADD CONSTRAINT `FK_integrante_grupo_investigador`
	FOREIGN KEY (`i_codigo_investigador`) REFERENCES `investigador` (`k_codigo`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `producto` 
 ADD CONSTRAINT `FK_producto_categoria`
	FOREIGN KEY (`c_categoria`) REFERENCES `categoria` (`k_codigo`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `producto` 
 ADD CONSTRAINT `FK_producto_grupo_investigacion`
	FOREIGN KEY (`i_codigo_grupo`) REFERENCES `grupo_investigacion` (`k_codigo`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `producto_investigador` 
 ADD CONSTRAINT `FK_producto_investigador_investigador`
	FOREIGN KEY (`i_codigo_investigador`) REFERENCES `investigador` (`k_codigo`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `producto_investigador` 
 ADD CONSTRAINT `FK_producto_investigador_producto`
	FOREIGN KEY (`i_codigo_producto`) REFERENCES `producto` (`k_codigo`) ON DELETE Restrict ON UPDATE Restrict
;

SET FOREIGN_KEY_CHECKS=1 
;
